<div class="app-background">
  <main class="auth-wrapper">
    <section class="auth-card">
      <div class="titles">
        <div class="welcome">Restart Password</div>
        <div class="subtitle">Enter your new password</div>
      </div>

      <form class="form" [formGroup]="form" (ngSubmit)="submit()">
        <!-- New Password -->
        <div class="field">
          <label class="label">New Password</label>
          <div class="input-wrap">
            <span class="icon left">ğŸ”’</span>

            <input
              class="input"
              [type]="hideNewPassword ? 'password' : 'text'"
              placeholder="Enter new password"
              formControlName="newPassword"
            />

            <button
              type="button"
              class="icon-btn right"
              (click)="toggleNewPassword()"
              aria-label="Toggle new password visibility"
            >
              {{ hideNewPassword ? 'ğŸ‘ï¸' : 'ğŸ™ˆ' }}
            </button>
          </div>

          <div class="error" *ngIf="newPassword.touched && newPassword.invalid">
            <span *ngIf="newPassword.errors?.['required']">Password is required.</span>
            <span *ngIf="newPassword.errors?.['minlength']">Minimum 8 characters.</span>
          </div>
        </div>

        <!-- Confirm New Password -->
        <div class="field">
          <label class="label">Confirm New Password</label>
          <div class="input-wrap">
            <span class="icon left">ğŸ”</span>

            <input
              class="input"
              [type]="hideConfirmPassword ? 'password' : 'text'"
              placeholder="Confirm new password"
              formControlName="confirmNewPassword"
            />

            <button
              type="button"
              class="icon-btn right"
              (click)="toggleConfirmPassword()"
              aria-label="Toggle confirm password visibility"
            >
              {{ hideConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ™ˆ' }}
            </button>
          </div>

          <div class="error" *ngIf="confirmNewPassword.touched && confirmNewPassword.invalid">
            <span *ngIf="confirmNewPassword.errors?.['required']">Confirmation is required.</span>
          </div>

          <div class="error" *ngIf="form.touched && form.errors?.['passwordMismatch']">
            Lozinke se ne poklapaju.
          </div>
        </div>

        <!-- Button -->
        <button class="primary-btn" type="submit" [disabled]="loading">
          {{ loading ? 'Resetujem...' : 'Reset Password' }}
        </button>

        <!-- Status -->
        <div class="error" *ngIf="error">{{ error }}</div>
        <div class="success" *ngIf="sent">{{ message || 'Lozinka je uspeÅ¡no promenjena.' }}</div>
        <div class="info" *ngIf="loading">Å aljem zahtev...</div>

        <!-- Bottom -->
        <div class="bottom">
          <a class="link" [routerLink]="['/login']">Back to Login</a>
        </div>
      </form>
    </section>
  </main>
</div>
