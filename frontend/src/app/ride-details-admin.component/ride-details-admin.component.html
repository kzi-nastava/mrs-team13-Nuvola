<div class="ride-details" *ngIf="ride; else noRideData">
  <!-- âœ… ISPRAVKA 1: ride.id -> ride?.id ?? 'N/A' -->
  <h3>ğŸš— Detalji voznje #{{ ride?.id ?? 'N/A' }}</h3>

  <!-- MAPA -->
  <div class="map-section">
    <div #mapContainer class="map-container"></div>
  </div>

  <!-- OSNOVNE INFORMACIJE -->
  <div class="info-section">
    <div class="info-row">
      <span class="label">PolaziÅ¡te:</span>
      <span class="value">{{ ride?.startLocation ?? 'N/A' }}</span>
    </div>
    <div class="info-row">
      <span class="label">OdrediÅ¡te:</span>
      <span class="value">{{ ride?.destination ?? 'N/A' }}</span>
    </div>
    <div class="info-row">
      <span class="label">Vrijeme poÄetka:</span>
      <span class="value">{{ formatTime(ride?.startTime) }}</span>
    </div>
    <div class="info-row">
      <span class="label">Vrijeme kraja:</span>
      <span class="value">{{ formatTime(ride?.endTime) }}</span>
    </div>
    <div class="info-row">
      <span class="label">Cena:</span>
      <span class="value highlight">
        ğŸ’° {{ (ride?.price ?? 0).toFixed(2) }} RSD
      </span>
    </div>
    <div class="info-row">
      <span class="label">PANIC:</span>
      <span [class]="isPanic() ? 'panic' : 'safe'">
        {{ isPanic() ? 'âš ï¸ AKTIVIRANO' : 'âœ“ NE' }}
      </span>
    </div>
  </div>

  <!-- VOZAÄŒ I PUTNICI -->
  <div class="people-section">
    <h4>ğŸ‘¥ Sudionici</h4>
    <div class="info-row">
      <span class="label">VozaÄ:</span>
      <span class="value">{{ ride?.driverName ?? 'N/A' }}</span>
    </div>
    <div class="info-row">
      <span class="label">Putnici:</span>
      <span class="value">
        <!-- âœ… ISPRAVKA 2: getPassengers() umjesto ride.passengerNames -->
        <ng-container *ngIf="getPassengers().length > 0">
          <span *ngFor="let passenger of getPassengers(); let last = last">
            {{ passenger }}<span *ngIf="!last">, </span>
          </span>
        </ng-container>
        <span *ngIf="getPassengers().length === 0" class="text-muted">
          Nema putnika
        </span>
      </span>
    </div>
  </div>

  <!-- OCJENE -->
  <div class="ratings-section">
    <h4>â­ Ocjene</h4>
    <div class="info-row">
      <span class="label">Ocjena vozaÄa:</span>
      <span class="value">{{ getRating(ride?.driverRating) }}</span>
    </div>
    <div class="info-row">
      <span class="label">Ocjena putnika:</span>
      <span class="value">{{ getRating(ride?.passengersRating) }}</span>
    </div>
  </div>

  <!-- PRIJAVE O NEKONZISTENTNOSTI -->
  <!-- âœ… ISPRAVKA 3: getReports() umjesto ride.inconsistencyReports -->
  <div class="reports-section" *ngIf="getReports().length > 0">
    <h4>âš ï¸ Prijave o nekonzistentnosti</h4>
    <div class="report-list">
      <div *ngFor="let report of getReports()" class="report-item">
        <p>{{ report?.description ?? 'Bez opisa' }}</p>
      </div>
    </div>
  </div>

  <div class="reports-section" *ngIf="getReports().length === 0">
    <p class="no-reports">âœ“ Nema prijava o nekonzistentnosti</p>
  </div>

  <!-- OPCIJE ZA PONOVNO SLANJE -->
  <div class="reorder-section">
    <h4>ğŸ”„ Ponovna narudÅ¾ba</h4>
    <div class="reorder-options">
      <span *ngFor="let option of getReorderOptions()" class="reorder-badge">
        {{ option }}
      </span>
    </div>
  </div>
</div>

<!-- âœ… FALLBACK TEMPLATE -->
<ng-template #noRideData>
  <div class="no-ride-message">
    <p>â³ UÄitavanje podataka voznje...</p>
  </div>
</ng-template>
