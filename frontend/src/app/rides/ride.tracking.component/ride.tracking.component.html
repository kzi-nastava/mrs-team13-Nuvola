<main class="page">
    <h1>Ride Tracking</h1>

    <div id="ride-tracking-map"></div>

    <div class="eta" *ngIf="remainingKm !== null && remainingMin !== null">
      <div class="eta-item">
        <div class="eta-label">Left</div>
        <div class="eta-value">{{ remainingKm | number:'1.1-1' }} km</div>
      </div>

      <div class="eta-item">
        <div class="eta-label">Estimate</div>
        <div class="eta-value">{{ remainingMin }} min</div>
      </div>
    </div>


  <div class="actions">
    <button class="btn" type="button" (click)="toggleReportForm()">
      {{ showReportForm ? 'Close report' : 'Create report' }}
    </button>
  </div>

  <form
    class="report-form"
    *ngIf="showReportForm"
    (ngSubmit)="submitReport()"
  >
    <label class="label" for="reportText">Report</label>

    <textarea
      id="reportText"
      class="textarea"
      name="reportText"
      [(ngModel)]="reportText"
      rows="4"
      placeholder="Unesi tekst reporta..."
      required
    ></textarea>
    <p class="msg error" *ngIf="errorMessage">{{ errorMessage }}</p>
    <p class="msg ok" *ngIf="successMessage">{{ successMessage }}</p>


    <button class="btn primary" type="submit" [disabled]="isSending || !reportText.trim()">
      {{ isSending ? 'Sending...' : 'Send' }}
    </button>
  </form>
</main>
